[{"body":"What is OpAMP Commander? OpAMP Commander is a comprehensive management platform for OpenTelemetry agents that implements the Open Agent Management Protocol (OpAMP). It provides a centralized solution for managing, monitoring, and configuring distributed telemetry collection agents.\nKey Features Centralized Management Manage all your OpenTelemetry agents from a single web-based interface. Monitor agent health, status, and performance metrics in real-time.\nDynamic Configuration Update agent configurations dynamically without restarting agents. Push configuration changes to individual agents or groups of agents instantly.\nAgent Discovery Automatically discover and register new agents as they come online. Track agent inventory and deployment status across your infrastructure.\nVersion Control Manage agent versions and coordinate upgrades across your fleet. Roll out updates gradually with canary deployments.\nSecurity Built-in authentication and authorization ensure secure communication between the server and agents. Support for TLS/SSL encryption and JWT-based authentication.\nArchitecture OpAMP Commander follows a modern, layered architecture designed for scalability and maintainability.\nSystem Overview graph TB subgraph Clients CLI[opampctl CLI] Agent[OpAMP Agents\u003cbr/\u003eOpenTelemetry Collectors] WebUI[Web UI\u003cbr/\u003ePlanned] end subgraph \"OpAMP Commander Server\" Server[OpAMP Commander\u003cbr/\u003eAPI Server] end subgraph Storage DB[(MongoDB\u003cbr/\u003eDatabase)] end CLI --\u003e|HTTP/REST\u003cbr/\u003eManagement API| Server Agent --\u003e|WebSocket/gRPC\u003cbr/\u003eOpAMP Protocol| Server WebUI -.-\u003e|HTTP/REST| Server Server --\u003e|Persist Data| DB style Server fill:#4a90e2,stroke:#333,stroke-width:2px,color:#fff style DB fill:#6c757d,stroke:#333,stroke-width:2px,color:#fff style CLI fill:#28a745,stroke:#333,stroke-width:2px,color:#fff style Agent fill:#ffc107,stroke:#333,stroke-width:2px,color:#000 style WebUI fill:#17a2b8,stroke:#333,stroke-width:2px,color:#fff Component Interactions Agent Registration \u0026 Management:\nsequenceDiagram participant Agent as OpAMP Agent participant Server as OpAMP Commander participant DB as MongoDB Agent-\u003e\u003eServer: Connect via WebSocket Server-\u003e\u003eDB: Store Agent Info Server-\u003e\u003eAgent: Send Configuration Agent-\u003e\u003eServer: Report Status Server-\u003e\u003eDB: Update Agent State Configuration Management via CLI:\nsequenceDiagram participant Admin as Administrator participant CLI as opampctl participant Server as OpAMP Commander participant Agent as OpAMP Agent Admin-\u003e\u003eCLI: opampctl create agentgroup CLI-\u003e\u003eServer: POST /api/v1/agentgroups Server-\u003e\u003eCLI: Group Created Admin-\u003e\u003eCLI: opampctl update config CLI-\u003e\u003eServer: PUT /api/v1/agents/{id}/update-agent-config Server-\u003e\u003eAgent: Push New Configuration Agent-\u003e\u003eServer: Acknowledge Server-\u003e\u003eCLI: Update Successful Key Features REST API: Full-featured HTTP API for programmatic management OpAMP Protocol: Native support for OpenTelemetry Agent Management Protocol Agent Groups: Manage multiple agents with shared configurations Authentication: JWT tokens, OAuth2 (GitHub), Basic Auth Scalability: Stateless design enabling horizontal scaling Technology Stack Backend: Go 1.21+, Gin web framework Database: MongoDB 4.4+ for persistence Protocol: OpAMP over WebSocket/gRPC Observability: Prometheus metrics, structured logging Use Cases Infrastructure Monitoring Deploy and manage OpenTelemetry collectors across your infrastructure for comprehensive observability.\nMicroservices Observability Configure distributed tracing and metrics collection for containerized applications.\nCompliance and Governance Enforce standardized telemetry collection policies across your organization.\nCost Optimization Control sampling rates and filter telemetry data to optimize storage and processing costs.\nGetting Started Ready to start using OpAMP Commander? Check out our Getting Started Guide for installation and setup instructions.\n","categories":"","description":"An overview of OpAMP Commander and its capabilities.\n","excerpt":"An overview of OpAMP Commander and its capabilities.\n","ref":"/en/docs/overview/","tags":"","title":"Overview"},{"body":"What is OpAMP Commander? OpAMP Commander is an agent management system that implements the OpenTelemetry Agent Management Protocol (OpAMP). It provides the following features:\nRemote agent monitoring and management Centralized configuration management Real-time agent status monitoring Agent updates and deployment Prerequisites Before using OpAMP Commander, you’ll need:\nGo 1.21 or later Docker (optional, for container deployment) MongoDB (for data storage) Installation Building from Source git clone https://github.com/minuk-dev/opampcommander.git cd opampcommander make build Running with Docker docker-compose up -d First Run To run OpAMP Commander:\n./opampcommander server By default, the server runs at http://localhost:8080.\nNext Steps Learn how to configure OpAMP Commander in the Configuration Guide Check out API usage in the API Reference Explore CLI commands in the CLI Reference ","categories":"","description":"Learn how to get started with OpAMP Commander.\n","excerpt":"Learn how to get started with OpAMP Commander.\n","ref":"/en/docs/getting-started/","tags":"","title":"Getting Started"},{"body":"Basic Configuration OpAMP Commander can be configured through a YAML file. The default configuration file is located at configs/config.yaml.\nServer Configuration server: http: address: \":8080\" grpc: address: \":9090\" OpAMP Configuration opamp: server: endpoint: \"ws://localhost:4320/v1/opamp\" Database Configuration database: mongodb: uri: \"mongodb://localhost:27017\" database: \"opampcommander\" Environment Variables Configuration values can also be provided via environment variables:\nSERVER_HTTP_ADDRESS: HTTP server address SERVER_GRPC_ADDRESS: gRPC server address MONGODB_URI: MongoDB connection URI MONGODB_DATABASE: MongoDB database name Advanced Configuration Logging logging: level: \"info\" format: \"json\" Authentication auth: enabled: true jwt: secret: \"your-secret-key\" ","categories":"","description":"Learn how to configure OpAMP Commander.\n","excerpt":"Learn how to configure OpAMP Commander.\n","ref":"/en/docs/configuration/","tags":"","title":"Configuration"},{"body":"OpAMP Commander provides a RESTful API for managing agents, agent groups, and configurations.\nAuthentication Most API endpoints require authentication. OpAMP Commander supports multiple authentication methods:\nBasic Authentication GET /api/v1/auth/basic Authorization: Basic \u003cbase64-encoded-credentials\u003e Response:\n{ \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\", \"expiresAt\": \"2024-01-01T00:00:00Z\" } GitHub OAuth2 GET /api/v1/auth/github Returns the GitHub OAuth2 authorization URL for web-based authentication.\nGitHub Device Flow For CLI tools, use the device authorization flow:\nGET /api/v1/auth/github/device Response:\n{ \"device_code\": \"...\", \"user_code\": \"ABCD-1234\", \"verification_uri\": \"https://github.com/login/device\", \"expires_in\": 900, \"interval\": 5 } Exchange the device code for a token:\nGET /api/v1/auth/github/device/exchange?device_code=\u003cdevice-code\u003e Using Authentication Token Include the token in the Authorization header for subsequent requests:\nAuthorization: Bearer \u003cyour-jwt-token\u003e Agent Management List Agents Retrieve a list of all connected agents.\nGET /api/v1/agents?limit=10\u0026continue=\u003ctoken\u003e Query Parameters:\nlimit (optional): Maximum number of agents to return continue (optional): Continuation token for pagination Response:\n[ { \"instanceUid\": \"agent-001\", \"description\": { \"identifyingAttributes\": { \"service.name\": \"my-service\", \"service.instance.id\": \"instance-1\" }, \"nonIdentifyingAttributes\": { \"host.name\": \"server-1\" } }, \"capabilities\": 15, \"isManaged\": true, \"effectiveConfig\": { \"configMap\": { \"config.yaml\": { \"body\": \"...\", \"contentType\": \"text/yaml\" } } }, \"remoteConfig\": {...}, \"componentHealth\": {...}, \"packageStatuses\": {...} } ] Get Agent Retrieve details for a specific agent by instance UID.\nGET /api/v1/agents/{instanceUid} Response: Returns a single Agent object.\nUpdate Agent Configuration Send a configuration update command to an agent.\nPOST /api/v1/agents/{instanceUid}/update-agent-config Content-Type: application/json { \"remoteConfig\": { \"config\": { \"configMap\": { \"collector.yaml\": { \"body\": \"receivers:\\n otlp:\\n protocols:\\n grpc:\\n\", \"contentType\": \"text/yaml\" } } }, \"configHash\": \"...\" } } Response:\n{ \"id\": \"cmd-123\", \"kind\": \"update-config\", \"targetInstanceUid\": \"agent-001\", \"data\": {...} } Agent Groups Agent groups allow you to manage configurations for multiple agents collectively.\nList Agent Groups GET /api/v1/agentgroups?limit=10\u0026continue=\u003ctoken\u003e Query Parameters:\nlimit (optional): Maximum number of groups to return continue (optional): Continuation token for pagination Response:\n[ { \"name\": \"production\", \"description\": \"Production environment agents\", \"labels\": { \"env\": \"production\" }, \"remoteConfig\": {...}, \"createdAt\": \"2024-01-01T00:00:00Z\", \"updatedAt\": \"2024-01-01T00:00:00Z\" } ] Get Agent Group GET /api/v1/agentgroups/{name} Response: Returns a single AgentGroup object.\nCreate Agent Group POST /api/v1/agentgroups Content-Type: application/json { \"name\": \"staging\", \"description\": \"Staging environment agents\", \"labels\": { \"env\": \"staging\" }, \"remoteConfig\": { \"config\": { \"configMap\": { \"collector.yaml\": { \"body\": \"...\", \"contentType\": \"text/yaml\" } } } } } Response: Returns the created AgentGroup with status code 201.\nUpdate Agent Group PUT /api/v1/agentgroups/{name} Content-Type: application/json { \"name\": \"staging\", \"description\": \"Updated description\", \"labels\": { \"env\": \"staging\", \"version\": \"v2\" }, \"remoteConfig\": {...} } Response: Returns the updated AgentGroup.\nDelete Agent Group DELETE /api/v1/agentgroups/{name} Response: 204 No Content on success.\nCommands List Commands View all commands sent to agents.\nGET /api/v1/commands?limit=10\u0026continue=\u003ctoken\u003e Response:\n[ { \"id\": \"cmd-123\", \"kind\": \"update-config\", \"targetInstanceUid\": \"agent-001\", \"data\": {...}, \"createdAt\": \"2024-01-01T00:00:00Z\", \"status\": \"pending\" } ] Get Command GET /api/v1/commands/{id} Response: Returns a single AgentCommand object.\nConnections List Active Connections View all active agent connections.\nGET /api/v1/connections Response:\n[ { \"instanceUid\": \"agent-001\", \"remoteAddr\": \"192.168.1.100:54321\", \"connectedAt\": \"2024-01-01T00:00:00Z\", \"lastHeartbeat\": \"2024-01-01T00:05:00Z\" } ] Server Information Get Server Info GET /api/v1/servers Returns information about the OpAMP Commander server.\nVersion GET /api/v1/version Response:\n{ \"version\": \"v1.0.0\", \"commit\": \"abc123\", \"buildDate\": \"2024-01-01T00:00:00Z\" } Health Checks GET /healthz GET /readyz Returns 200 OK if the server is healthy/ready.\nPing GET /api/v1/ping Returns 200 OK for connectivity testing.\nError Responses All endpoints return standard HTTP status codes. Error responses follow this format:\n{ \"error\": \"Error message description\", \"code\": \"ERROR_CODE\", \"details\": {...} } Common Status Codes:\n200 OK: Request succeeded 201 Created: Resource created successfully 204 No Content: Request succeeded with no response body 400 Bad Request: Invalid request parameters 401 Unauthorized: Authentication required or invalid 404 Not Found: Resource not found 500 Internal Server Error: Server error occurred ","categories":"","description":"Learn how to use the OpAMP Commander REST API.\n","excerpt":"Learn how to use the OpAMP Commander REST API.\n","ref":"/en/docs/api/","tags":"","title":"API Reference"},{"body":"opampctl is a command-line interface for interacting with the OpAMP Commander server. It provides commands for managing agents, agent groups, and configurations.\nInstallation Install opampctl using Go:\ngo install github.com/minuk-dev/opampcommander/cmd/opampctl@latest Or build from source:\ngit clone https://github.com/minuk-dev/opampcommander.git cd opampcommander go build -o opampctl ./cmd/opampctl Configuration Before using opampctl, you need to initialize the configuration:\nopampctl config init This creates a configuration file at ~/.config/opampcommander/opampctl/config.yaml.\nConfiguration File The configuration file stores server connection details and authentication information:\ncontexts: - name: production server: https://opamp.example.com token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... - name: staging server: https://opamp-staging.example.com token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... currentContext: production Configuration Commands Initialize Configuration opampctl config init Creates a default configuration file.\nView Configuration opampctl config view Displays the current configuration.\nContext Management Contexts allow you to switch between different OpAMP Commander servers.\nList Contexts opampctl context ls Shows all available contexts and highlights the current one.\nUse Context opampctl context use \u003ccontext-name\u003e Switch to a different context.\nExample:\nopampctl context use staging Authentication Check Authentication Status opampctl whoami Displays information about the currently authenticated user or service account.\nAgent Management List Agents opampctl get agent opampctl get agents Lists all agents connected to the OpAMP Commander server.\nOptions:\n--limit \u003cn\u003e: Limit the number of results --continue \u003ctoken\u003e: Continue from a previous pagination token Example:\nopampctl get agent --limit 20 Output:\nINSTANCE UID SERVICE NAME STATUS LAST SEEN agent-001 my-service active 2024-01-01T00:00:00Z agent-002 other-service active 2024-01-01T00:05:00Z Get Agent Details opampctl get agent \u003cinstance-uid\u003e Displays detailed information about a specific agent.\nExample:\nopampctl get agent agent-001 Output:\ninstanceUid: agent-001 description: identifyingAttributes: service.name: my-service service.instance.id: instance-1 nonIdentifyingAttributes: host.name: server-1 capabilities: 15 isManaged: true effectiveConfig: configMap: collector.yaml: body: | receivers: otlp: protocols: grpc: contentType: text/yaml Agent Group Management List Agent Groups opampctl get agentgroup opampctl get agentgroups Lists all agent groups.\nExample:\nopampctl get agentgroup Output:\nNAME DESCRIPTION CREATED production Production agents 2024-01-01T00:00:00Z staging Staging agents 2024-01-01T00:05:00Z Get Agent Group Details opampctl get agentgroup \u003cname\u003e Displays detailed information about a specific agent group.\nCreate Agent Group opampctl create agentgroup \u003cname\u003e [flags] Creates a new agent group.\nFlags:\n--description \u003ctext\u003e: Description of the agent group --label \u003ckey=value\u003e: Add labels (can be specified multiple times) --config-file \u003cpath\u003e: Path to configuration file Example:\nopampctl create agentgroup production \\ --description \"Production environment agents\" \\ --label env=production \\ --label tier=critical \\ --config-file ./collector-config.yaml Delete Agent Group opampctl delete agentgroup \u003cname\u003e Deletes an agent group.\nExample:\nopampctl delete agentgroup staging Connection Management List Active Connections opampctl get connection opampctl get connections Lists all active agent connections to the server.\nOutput:\nINSTANCE UID REMOTE ADDRESS CONNECTED AT LAST HEARTBEAT agent-001 192.168.1.100:54321 2024-01-01T00:00:00Z 2024-01-01T00:05:00Z agent-002 192.168.1.101:54322 2024-01-01T00:01:00Z 2024-01-01T00:06:00Z Global Flags The following flags are available for all commands:\n--config \u003cpath\u003e: Path to configuration file (default: ~/.config/opampcommander/opampctl/config.yaml) --context \u003cname\u003e: Use a specific context --server \u003curl\u003e: OpAMP Commander server URL (overrides context) --token \u003ctoken\u003e: Authentication token (overrides context) --output \u003cformat\u003e: Output format (json, yaml, table) - default: table --verbose: Enable verbose output --help: Display help information Version opampctl version Displays the version information for opampctl.\nOutput:\nopampctl version: v1.0.0 commit: abc123def456 build date: 2024-01-01T00:00:00Z Examples Complete Workflow Example Initialize configuration: opampctl config init Check authentication: opampctl whoami List all agents: opampctl get agents Create a new agent group: opampctl create agentgroup dev \\ --description \"Development environment\" \\ --label env=dev View agent group details: opampctl get agentgroup dev List active connections: opampctl get connections Working with Multiple Environments # Switch to staging environment opampctl context use staging # List agents in staging opampctl get agents # Switch back to production opampctl context use production # List agents in production opampctl get agents Using Different Output Formats # JSON output opampctl get agent agent-001 --output json # YAML output opampctl get agent agent-001 --output yaml # Table output (default) opampctl get agent agent-001 Troubleshooting Configuration File Not Found If you see an error about the configuration file not found:\nopampctl config init Authentication Errors If you encounter authentication errors:\nCheck your token is valid: opampctl whoami Verify your server URL is correct: opampctl config view Re-authenticate if necessary using the API authentication endpoints. Connection Issues If you can’t connect to the server:\nVerify the server is running and accessible Check your network connectivity Ensure the server URL in your configuration is correct Try using the --server flag to override the configuration Exit Codes 0: Success 1: General error 2: Configuration error 3: Authentication error 4: Connection error 5: Resource not found ","categories":"","description":"Learn how to use the opampctl command line tool.\n","excerpt":"Learn how to use the opampctl command line tool.\n","ref":"/en/docs/cli/","tags":"","title":"CLI Reference"},{"body":"Welcome to the OpAMP Commander documentation. Here you can find everything you need to get started with OpAMP Commander.\n","categories":"","description":"","excerpt":"Welcome to the OpAMP Commander documentation. Here you can find everything you need to get started with OpAMP Commander.\n","ref":"/en/docs/","tags":"","title":"Documentation"},{"body":" Welcome to OpAMP Commander Learn More GitHub Agent Management System based on OpenTelemetry OpAMP Protocol\nOpAMP Commander is a powerful tool for efficiently managing and monitoring remote agents using the OpenTelemetry Agent Management Protocol (OpAMP).\nEasy Management Manage agents easily with a web-based interface.\nConfiguration Management Update agent configurations in real-time with centralized configuration management.\nMonitoring Monitor and manage agent status in real-time.\n","categories":"","description":"","excerpt":" Welcome to OpAMP Commander Learn More GitHub Agent Management System based on OpenTelemetry OpAMP Protocol\nOpAMP Commander is a powerful tool for efficiently managing and monitoring remote agents …","ref":"/","tags":"","title":"OpAMP Commander"},{"body":"","categories":"","description":"","excerpt":"","ref":"/en/","tags":"","title":"OpAMP Commander Documentation"}]